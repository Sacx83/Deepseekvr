<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DeepSeek VR Chat</title>
    <!-- A-Frame (WebXR) MUST LOAD FIRST -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- AFRAME Extras (for better text) -->
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <style>
      body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
      #loading {
        position: absolute; top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        color: white; font-size: 24px; z-index: 1000;
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loading">Loading VR...</div>

    <!-- A-Frame VR Scene -->
    <a-scene loading-screen="enabled: false">
      <!-- Sky (Dark background) -->
      <a-sky color="#222"></a-sky>

      <!-- AI Response (3D Text) -->
      <a-entity
        id="ai-response"
        text="value: Welcome to DeepSeek VR! Ask me anything.; 
              color: white; align: center; width: 3; wrapCount: 30"
        position="0 1.5 -2"
      ></a-entity>

      <!-- Microphone Button -->
      <a-entity
        id="mic-button"
        geometry="primitive: sphere; radius: 0.2"
        material="color: red; shader: flat"
        position="0 0.5 -1"
        animation="property: scale; to: 1.2 1.2 1.2; dur: 1000; loop: true; dir: alternate"
        cursor-listener
      >
        <a-entity
          text="value: Click/Pinch to Speak; 
                color: white; align: center; width: 0.5"
          position="0 -0.3 0"
        ></a-entity>
      </a-entity>

      <!-- User Prompt -->
      <a-entity
        id="user-prompt"
        text="value: Say something...; 
              color: #0ff; align: center; width: 2"
        position="0 1 -1.5"
        visible="false"
      ></a-entity>

      <!-- Ground -->
      <a-circle position="0 -0.5 0" rotation="-90 0 0" radius="5" color="#333"></a-circle>
      <!-- Lighting -->
      <a-light type="ambient" intensity="0.5"></a-light>
      <a-light type="directional" intensity="0.8" position="-1 2 -2"></a-light>
    </a-scene>

    <!-- Load app.js AFTER A-Frame and DOM are ready -->
    <script>
      document.querySelector("a-scene").addEventListener("loaded", () => {
        document.getElementById("loading").style.display = "none";
        // Dynamically load app.js after everything is ready
        const script = document.createElement('script');
        script.src = 'app.js';
        script.type = 'module'; // Keep as module if needed
        document.body.appendChild(script);
      });
    </script>
  </body>
</html>
